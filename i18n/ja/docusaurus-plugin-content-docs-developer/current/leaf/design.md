---
title: 技術設計
date: 2021年7月12日23時33分7秒
---

# パンドリーフデザインドキュメント

## パンドと対話する

パンドのすべての参加者は、トークンをマルチシグウォレットに転送することでインタラクションを完了します。 ノードワーカー<strongx-id = "1"> Syncer </ strong>は、支払いをミックスインマルチシグ出力として同期します。 別のワーカー<strongx-id = "1">受取人</ strong>がすべての出力を順番に処理します。

![パンドデザイン ](design/mtg_design.png)

### Mixinマルチシグ出力

**出力： **

| 領域     | 説明           |
| ------ | ------------ |
| 差出人    | ユーザーミックスインID |
| 作成したAt | 支払い時間        |
| 資産 ID  | 支払い資産ID      |
| 金額     | 支払額          |
| メモ:    | 追加メッセージ      |

**出力メモ： **

メモには<strongx-id = "1"> TransactionAction </ strong>情報が含まれています。詳細については<ahref = "https://github.com/fox-one/pando/blob/main/core/actionをご覧ください。 go "> DecodeTransactionAction </a>。

メモはおそらくAESで暗号化されており、複合AESキー/ ivに使用されるed25519公開キーは最初の32バイトにあります。

### 取引アクション定義

| 分野   | 説明                       | 種類               |
| ---- | ------------------------ | ---------------- |
| 従うID | このトランザクションのユーザー定義のトレースID | 誰でも自由に作れるユニークなID |
| 体    | アクションタイプ＆amp; 関連するパラメータ  | バイト              |

## 労働者

1. ** Syncer </ strong>は、mixin messenger api＆amp;によって手つかずのutxoを同期します。 更新された昇順で<strongx-id = "1">出力</ strong>としてWalletStoreに保存します。 </li>
2 ** Payee </ strong>は、WalletStoreから手つかずのutxoを順番にプルし、メモを解析してアクションを取得してから処理します。  転送は、処理中に作成される場合があります。</li>
3 <strongx-id = "1">割り当て者</ strong>は、十分な未使用のUTXOを選択し、保留中の転送に割り当てます。
4 <strongx-id = "1">キャッシャー</ strong>は、WalletStoreから未処理の転送を順番にプルしてから、＆amp;をリクエストします。 マルチシグ転送に署名します。  十分な数の署名が収集された場合は、生のトランザクションを生成します。
5 ** TxSender </ strong>は生のトランザクションをMixinネットワークにコミットします。 </li> </ol>

### シンカーワークフロー

![シンカーワークフロー ](design/pando-syncer.png)

### 受取人のワークフロー

![受取人のワークフロー](design/pando-payee.png)

### アサイナ＆amp; キャッシャー＆amp; TxSenderワークフロー

![アサイナ＆amp; キャッシャーワークフロー ](design/pando-cashier.png)

## 動作

グループcat、flip、oracle、proposal、sys、vatでPandoがサポートするすべてのアクション。  詳細については、<ahref = "https://github.com/fox-one/pando/blob/main/core/action.go">コア/アクション</a>を参照してください。

### システム-システム操作

#### ＃1撤回

> pkg/maker/sys/withdraw.go

マルチシグウォレットから資産を撤回します。提案が必要です。

**パラメーター:**

| 名前 | 種類   | 説明           |
| -- | ---- | ------------ |
| 資産 | uuid | 資産IDを引き出す    |
| 額  | uuid | 金額を撤回        |
| 相手 | uuid | 受信者のミックスインID |

### 提案-ガバナンスシステム

#### ＃11作る

> pkg/maker/proposal/make.go

新しい提案を作成する

**パラメーター：**

| 名前  | 種類  | 説明                                |
| --- | --- | --------------------------------- |
| データ | バイト | アクションタイプ＆amp; 渡された場合、パラメータが実行されます |

#### #12 叫ぶ

> pkg/作り手/提案 /叫ぶ .go

ノード管理者にこの提案に投票するように要求します

**パラメーター：**

| 名前  | 種類               | 説明       |
| --- | ---------------- | -------- |
| 身分証 | 誰でも自由に作れるユニークなID | 提案トレースID |

#### #13 投票

> pkg/maker/proposal/vote.go

提案に投票する、ノードのみ。 十分な票が集められると、添付のアクションがすべてのノードで自動的に実行されます。

**パラメーター:**

| 名前  | 種類   | 説明       |
| --- | ---- | -------- |
| 身分証 | uuid | 提案トレースID |

### 猫- 管理者担保

#### #21 作成

> pkg/maker/cat/create.go

新しい担保タイプを作成します。提案が必要です。

**パラメーター:**

| 名前          | 種類               | 説明       |
| ----------- | ---------------- | -------- |
| 宝石          | 誰でも自由に作れるユニークなID | 担保トレースID |
| ダイナミックARP検査 | 誰でも自由に作れるユニークなID | 債務資産ID   |
| 名前          | 列                | 担保タイプ名   |

#### #22 供給

> pkg/maker/cat/supply.go

この担保タイプの総債務上限を引き上げるために、daiトークンを提供します。 支払い資産IDは、債務資産IDと同じである必要があります。

**パラメーター:**

| 名前  | 種類   | 説明       |
| --- | ---- | -------- |
| 身分証 | uuid | 担保トレースID |

#### #23 編集

> pkg/maker/cat/edit.go

担保の1つ以上の属性を変更します。提案が必要です。

**パラメーター:**

| 名前  | 種類   | 説明       |
| --- | ---- | -------- |
| 身分証 | uuid | 担保トレースID |
| 鍵   | 列    | 属性名      |
| 価値  | 列    | 属性値      |

#### #24折り畳み

> pkg/作り手/猫/畳む.go

負債乗数(率) を変更し、対応する負債を作成/破棄します。

**パラメーター：**

| 名前  | 種類               | 説明       |
| --- | ---------------- | -------- |
| 身分証 | 誰でも自由に作れるユニークなID | 担保トレースID |

### バット-マネージャーボールト

#### #31 開く

> pkg/作り手/vat/開く.go

特別担保タイプで新しい金庫を開く

**パラメーター：**

| 名前                       | 種類               | 説明       |
| ------------------------ | ---------------- | -------- |
| 身分証                      | 誰でも自由に作れるユニークなID | 担保トレースID |
| 債務, 負債, 借金, 債, 借入金, 借り入れ | 10進数             | 初期債務     |

#### #32保証金

> pkg/作り手/大桶/保証金 .go

担保を金庫に転送します。

**パラメーター：**

| 名前  | 種類               | 説明        |
| --- | ---------------- | --------- |
| 身分証 | 誰でも自由に作れるユニークなID | 保管庫トレースID |

#### #33 引き出し

> pkg/maker/vat/withdraw.go

ボールトから担保を引き出します。ボールトの所有者のみです。

**パラメーター:**

| 名前   | 種類   | 説明        |
| ---- | ---- | --------- |
| id   | uuid | 保管庫トレースID |
| dink | 10進数 | 担保の変更     |

#### #34 回収

> pkg/作り手/桶/回収.go

金庫の債務を減らします。

**パラメーター：**

| 名前  | 種類               | 説明        |
| --- | ---------------- | --------- |
| 身分証 | 誰でも自由に作れるユニークなID | 保管庫トレースID |

#### #生成

> pkg/作り手/桶/生成.go

金庫の債務を増やし、金庫の所有者のみ増やす。

**パラメーター：**

| 名前  | 種類               | 説明        |
| --- | ---------------- | --------- |
| 身分証 | 誰でも自由に作れるユニークなID | 保管庫トレースID |
| 債務  | 10進数             | 債務の変化     |

### フリップ-マネージャーオークション

#### #41一蹴

> pkg/作りて/弾く/一蹴.go

安全でない保管庫からのオークションのために担保を提示します。

**パラメーター：**

| 名前  | 種類               | 説明        |
| --- | ---------------- | --------- |
| 身分証 | 誰でも自由に作れるユニークなID | 保管庫トレースID |

#### #42入札

> pkg/作り手/弾く/一蹴.go

オークションに参加するために大金を払ってください。

> 入札フェーズから、入札者は固定ロットのジェムとダイの入札額を競います。 ダイのタブ量が上がると、オークションはへこみ段階に移行します。 傾向フェーズのポイントは、システムの負債をカバーするためにダイを上げることです。 デントフェーズの間、入札者は、ダイの固定タブ量に対してジェムのロット量を減らすために競争します。 没収されたGemは、所有者が回収できるように清算された金庫に戻されます。 デントフェーズのポイントは、市場が許す限り多くの担保をVaultホルダーに返却することです。

**パラメーター：**

| 名前  | 種類               | 説明         |
| --- | ---------------- | ---------- |
| 身分証 | 誰でも自由に作れるユニークなID | フリップトレースID |
| 多く  | 10進数             | 担保額        |

#### #43 対処

> pkg/作り手/弾く/一蹴.go

落札を請求する/完了したオークションを決済する

**パラメーター：**

| 名前  | 種類               | 説明         |
| --- | ---------------- | ---------- |
| 身分証 | 誰でも自由に作れるユニークなID | フリップトレースID |

### 託宣 - 管理者 託宣価格

#### #51 作成

> pkg/作り手/託宣/突く.go

資産の新しいオラクルを登録します。提案が必要です。

**パラメーター：**

| 名前           | 種類               | 説明               |
| ------------ | ---------------- | ---------------- |
| 身分証          | 誰でも自由に作れるユニークなID | 資産ID             |
| 価格           | 10進数             | 初期価格             |
| 跳ねる          | int64            | 突く呼び出し間の秒単位の時間遅延 |
| しきい値         | int64            | 突くときに必要な知事の数     |
| トランスポートストリーム | タイムスタンプ          | タイムスタンプの要求       |

#### #52 編集

> pkg/作り手/託宣/突く.go

オラクルの次の価格を変更し、ホップ & しきい値、提案が必要です。

**パラメーター：**

| 名前  | 種類               | 説明   |
| --- | ---------------- | ---- |
| 身分証 | 誰でも自由に作れるユニークなID | 資産ID |
| カギ  | 列                | 属性名  |
| 価値  | 列                | 属性値  |

#### #53 突く

> pkg/作り手/託宣/突く.go

現在のフィード値を更新し、次のフィード値をキューに入れます。

**パラメーター：**

| 名前           | 種類               | 説明         |
| ------------ | ---------------- | ---------- |
| 身分証          | 誰でも自由に作れるユニークなID | 資産ID       |
| 価格           | 10進数             | 新しい次の価格    |
| トランスポートストリーム | タイムスタンプ          | タイムスタンプの要求 |

#### #54 頼む

> pkg/作り手/託宣/突く.go

ホワイトリストに新しい価格フィードを追加します。提案が必要です

**パラメーター：**

| 名前  | 種類               | 説明              |
| --- | ---------------- | --------------- |
| 身分証 | 誰でも自由に作れるユニークなID | mixinのIDをフィードする |
| カギ  | バイト              | 公開鍵             |

#### #55 拒否

> pkg/作り手/託宣/突く.go

ホワイトリストから価格フィードを削除します。提案が必要です

**パラメーター：**

| 名前  | タイプ              | 説明              |
| --- | ---------------- | --------------- |
| 身分証 | 誰でも自由に作れるユニークなID | ミックスインIDをフィードする |
